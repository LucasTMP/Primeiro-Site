<html>
<head>
<title> Teste Form </title>
</head>
<body>
</br>
</br>
<form method="post"  action="gravar.jsp" name="formpagadm">
</br>
<input type="text"  name="admclicpf" >
</br>
<input type="date" name="datacompra">
</br>
<input type="text"  onblur="virgulaponto()" name="valcompra">
</br>
</br>
<input type="button" value="Salvar" onclick="pagadmval()">
</br>
<input type="reset" value="Limpar">
</from>


</br>
</br>
<input type="text"  name="saldo">
<input type="button" value="Consultar" onclick="teste()">


<script type="text/javascript">


function pagadmval(){


//valida cpf do cliente---------------------------------------------------------------------

var ccpf, cpfsoma, cpfresto;
soma = 0;
ccpf = document.formpagadm.admclicpf.value;
if ((ccpf=="") || (ccpf.length == 0) || (ccpf.length > 11) || (ccpf == "00000000000") || (ccpf == "11111111111") || (ccpf == "22222222222") || (ccpf == "33333333333") || (ccpf == "44444444444") || (ccpf == "55555555555") || (ccpf == "66666666666") || (ccpf == "77777777777") || (ccpf == "88888888888") || (ccpf == "99999999999")){
              alert("Preencha o campo CPF corretamente.");
              document.formpagadm.admclicpf.focus();
              document.formpagadm.admclicpf.style.background = "#ffcc99";
              document.formpagadm.admclicpf.value = "";
              document.formpagadm.datacompra.style.background = "#f2f2f2";
              document.formpagadm.datacompra.value = "";
              document.formpagadm.valcompra.style.background = "#f2f2f2";
              document.formpagadm.valcompra.value = "";
              document.formpagadm.saldo.style.background = "#f2f2f2";
              document.formpagadm.saldo.value = "";
              return false
    } else {
            //valida 1 digito
            cpfsoma = 0;
             for (i=0; i < 9; i ++){
               cpfsoma += parseInt(ccpf.charAt(i)) * (10 - i);
                 cpfresto = 11 - (cpfsoma % 11);
                            }
                   if (cpfresto == 10 || cpfresto == 11){
                      cpfresto = 0;
                                }

                        if (cpfresto != parseInt(ccpf.charAt(9))){
                        alert("Digite um CPF válido.");
                        document.formpagadm.admclicpf.focus();
                        document.formpagadm.admclicpf.style.background = "#ffcc99";
                        document.formpagadm.admclicpf.value = "";
                        document.formpagadm.datacompra.style.background = "#f2f2f2";
                        document.formpagadm.datacompra.value = "";
                        document.formpagadm.valcompra.style.background = "#f2f2f2";
                        document.formpagadm.valcompra.value = "";
                        document.formpagadm.saldo.style.background = "#f2f2f2";
                        document.formpagadm.saldo.value = "";
                     return false;
                                  }

                  //valida 2 digito
                  cpfsoma = 0;
                    for (i = 0; i < 10; i ++){
                    cpfsoma += parseInt(ccpf.charAt(i)) * (11 - i);
                    cpfresto = 11 - (cpfsoma % 11);
                                  }
                      if (cpfresto == 10 || cpfresto == 11){
                        cpfresto = 0;
                                  }
                    if (cpfresto != parseInt(ccpf.charAt(10))){
                      alert("Digite um CPF válido.");
                      document.formpagadm.admclicpf.focus();
                      document.formpagadm.admclicpf.style.background = "#ffcc99";
                      document.formpagadm.admclicpf.value = "";
                      document.formpagadm.datacompra.style.background = "#f2f2f2";
                      document.formpagadm.datacompra.value = "";
                      document.formpagadm.valcompra.style.background = "#f2f2f2";
                      document.formpagadm.valcompra.value = "";
                      document.formpagadm.saldo.style.background = "#f2f2f2";
                      document.formpagadm.saldo.value = "";
                      return false;
                                }
    }

//valida data da compra-------------------------------------------------------------------------



//valida valor da compra-----------------------------------------------------------------------------


                      var compravali;
                      compravali = document.formpagadm.valcompra.value;
                      var letra = 0;
                      var y = 0
                          for (y; y <= compravali.length; y++) {
                    var valorAsciicompra = compravali.charCodeAt(y)
                      // A- Z
                    if (valorAsciicompra >= 65 && valorAsciicompra <= 122)
                          letra++;

                        }

          if ((compravali == "") || (compravali.length = 0) || (letra > 0)){
            alert("Digite um valor válido. (ex: 24.90)");
            document.formpagadm.valcompra.focus();
            document.formpagadm.valcompra.style.background = "#ffcc99";
            document.formpagadm.admclicpf.style.background = "#f2f2f2";
            document.formpagadm.datacompra.style.background = "#f2f2f2";
            document.formpagadm.saldo.style.background = "#f2f2f2";
            document.formpagadm.saldo.value = "";
            return false;
          }

//manda banco de dados-----------------------------------------------------------------------------------

document.formpagadm.submit();
}

//mudar virgula para ponto--------------------------------------

        function virgulaponto(){

        var compraval, mudar;
          compraval = document.formpagadm.valcompra.value;
          mudar= compraval.replace(",",".");
        if ((compraval.indexOf(",") > 0)){
            document.formpagadm.valcompra.value = mudar;
                }
              }

</script>


</body>
</html>
